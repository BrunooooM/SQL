-----Criar um database-----
CREATE DATABASE "LBD"
TEMPLATE = TEMPLATE0
ENCODING 'WIN1252'
CONNECTION LIMIT -1;
---------------------------



-----Criar tabelas---------------------------------------------------
CREATE TABLE tb_cliente(
id_cliente     INTEGER,
titulo         VARCHAR(4),
nome           VARCHAR(32) CONSTRAINT nn_cliente_nome NOT NULL,
sobrenome      VARCHAR(32)
			   CONSTRAINT nn_cliente_sobrenome NOT NULL,
endereco       VARCHAR(62) CONSTRAINT nn_cliente_endereco NOT NULL,
numero         VARCHAR(5)  CONSTRAINT nn_cliente_numero NOT NULL,
complemento    VARCHAR(62),
cep            VARCHAR(10),
cidade         VARCHAR(62) CONSTRAINT nn_ciente_cidade NOT NULL,
estado         VARCHAR(2)  CONSTRAINT nn_cliente_estado NOT NULL,
fone_fixo      VARCHAR(15) CONSTRAINT nn_cliente_fone_fixo NOT NULL,
fone_movel     VARCHAR(15)
					CONSTRAINT nn_cliente_fone_movel NOT NULL,
fg_ativo       INTEGER,
CONSTRAINT pk_cliente_id_cliente PRIMARY KEY(id_cliente)
);
------cintunuando-------------------------------------------------------
CREATE TABLE tb_item( //criando tabela item
	id_item			INTEGER,
	ds_item 		VARCHAR(64) CONSTRAINT nn_item_ds_item NOT NULL,
	preco_custo		NUMERIC(7,2),
	preco_venda		NUMERIC(7,2),
	fg_ativo		INTEGER,
	CONSTRAINT pk_id_item PRIMARY KEY(id_item)
);


CREATE TABLE tb_pedido(
	id_pedido		INTEGER,
	id_cliente		INTEGER CONSTRAINT nn_pedido_id_cliente NOT NULL,
	dt_compra		TIMESTAMP,
	dt_entrega		TIMESTAMP,
	valor			NUMERIC(7,2),
	fg_ativo		INTEGER,
	CONSTRAINT pk_pedido_id_pedido PRIMARY KEY(id_pedido),
	CONSTRAINT fk_pedido_id_cliente FOREIGN KEY(id_cliente) //esta referenciando a chave primaria
		REFERENCES tb_cliente(id_cliente) //esta referenciando a chave primaria	
	
);

CREATE TABLE tb_item_pedido(
	id_item			INTEGER,
	id_pedido		INTEGER
						CONSTRAINT nn_item_pedido_id_pedido NOT NULL,
	quantidade		INTEGER,
	CONSTRAINT pk_item_pedido PRIMARY KEY(id_item, id_pedido),
	CONSTRAINT fk_item_pedido_id_item FOREIGN KEY(id_item)
		REFERENCES tb_item(id_item),
	CONSTRAINT fk_item_pedido_id_pedido FOREIGN KEY(id_pedido)
		REFERENCES tb_pedido(id_pedido)
);

CREATE TABLE tb_codigo_barras(
	codigo_barras	INTEGER	
						CONSTRAINT nn_cod_barras_codigo_barras NOT NULL,
	id_item			INTEGER CONSTRAINT nn_cod_barras_id_item NOT NULL,
	CONSTRAINT fk_cod_barras_id_item FOREIGN KEY(id_item)
		REFERENCES tb_item(id_item)
);

CREATE TABLE tb_estoque(
	id_item			INTEGER,
	quantidade		INTEGER,
	CONSTRAINT pk_estoque_id_item PRIMARY KEY(id_item),
	CONSTRAINT fk_estoque_id_item FOREIGN KEY(id_item)
		REFERENCES tb_item(id_item)
);


INSERT INTO tb_cliente(id_cliente, titulo, nome, sobrenome, endereco, numero, complemento,  //inserindo valores na tabela
					   cep, cidade, estado, fone_fixo, fone_movel, fg_ativo)

VALUES
(1,'Sra', 'Jessica', 'Mendes', 'Avenida Acelino de Leao', '89', NULL //primeira tupla
'68900 300', 'Macapá', 'AP', '3565 1243', '8765 8999', 1),

(2,'Sr', 'Andrei', 'Junqueira', 'Rua Tabaiares', '1024', NULL  //segunda tupla
'30150 040', 'Belo Horizonte', 'MG', '3676 1209', '8876 4543', 1),

(3,'Sr', 'Alex', 'Matheus', 'Rua Eva Terpins', 's/n', NULL   //terceira tupla
'05327 030', 'São Paulo', 'SP', '6576 0099', '9358 7676', 1);
